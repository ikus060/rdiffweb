{% extends 'layout_repo.html' %}
{% from 'include/panel.html' import panel %}
{% from 'include/messages.html' import messages %}
{% from 'include/modal_dialog.html' import modal_dialog, button_confirm, modal_confirm %}
{% set active_page='repo' %}
{% set active_repo_page='settings' %}
{% block title %}
  {% trans %}Settings{% endtrans %}
{% endblock %}
{% block content %}
  <div class="container">
    {# Delete repo button #}
    {% if not is_maintainer %}
      <span class="form-text">{% trans %}Ask your administrator if you want to delete this repository.{% endtrans %}</span>
    {% endif %}
    {{ button_confirm(label=_('Delete repository'), target="#delete-repo-modal", class="btn-danger float-right", disabled=not is_maintainer, redirect=url_for('/'), url=url_for('delete', repo)) }}
    {# Delete Repo Modal #}
    {{ modal_confirm(
    id="delete-repo-modal",
    title=_('Confirmation required'),
    message=_("You are about to permanently delete this repository. Deleted repository CANNOT be restored! Are you ABSOLUTELY sure?"),
    fields=['action'],
    submit=_('Delete'),
    confirm_value=repo.display_name) }}
    {# Repo settings #}
    <form method="post" action="{{ url_for() }}">
      {% call panel(
        title=_("Repository Settings"),
        description=_('You can modify the backup repository settings to suit your requirements. These settings allow you to adjust the notification period, retention period, and display format (encoding) of the repository to align with your preferred frequency, data storage duration, and localization needs.'),
        show_submit_area=True) %}
        {{ form }}
      {% endcall %}
    </form>
    {# Message Thread #}
    {{ messages(data_url=url_for('audit', repo)) }}
  </div>
{% endblock %}
